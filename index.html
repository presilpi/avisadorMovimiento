<!DOCTYPE html>
<html>
<head>
<title>Acceleration Example</title>

<link rel="stylesheet" type="text/css" href="style.css">

<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8">

cont=0;
x=0;
y=0;
z=0;

// The watch id references the current `watchAcceleration`
var watchID = null;

// Wait for device API libraries to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// device APIs are available
//
function onDeviceReady() {
startWatch();
}

// Start watching the acceleration
//
function startWatch() {

// Update acceleration every 3 seconds
var options = { frequency: 15000 };

watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);
}

// Stop watching the acceleration
//
function stopWatch() {
if (watchID) {
navigator.accelerometer.clearWatch(watchID);
watchID = null;
}
}

function reiniciarProceso(){
  alert('reiniciando Proceso');
}

// onSuccess: Get a snapshot of the current acceleration
//
function onSuccess(acceleration) {
var element = document.getElementById('accelerometer');
element.innerHTML = 'Acceleration X: ' + acceleration.x + '<br />' +
'Acceleration Y: ' + acceleration.y + '<br />' +
'Acceleration Z: ' + acceleration.z + '<br />' +
'Timestamp: ' + acceleration.timestamp + '<br />'+
'cont: ' + cont + '<br />';

if (cont==0){
x=abs(acceleration.x*100);
y=abs(acceleration.y*100);
z=abs(acceleration.z*100);
}
else{
alert(abs(acceleration.x*100));
     if (x!=(abs(acceleration.x*100)) || y!=(abs(acceleration.y*100)) || z!=(abs(acceleration.z*100)) ){
      reiniciarProceso();
      }
}

cont++;
}

// onError: Failed to get the acceleration
//
function onError() {
alert('onError!');
}

</script>
</head>
<body>
<div id='contenedor'>
<div id='cabecera'>
  <div id='usuario'>Nombre del usuario</div>
  <div id='fecha'>23 Diciembre 2013</div>
  <div id='dia'>Lunes</div>
</div>
<div id='barra'>
  <img src='img/on.png' id='onOff'>
  <div id='estado'>Sistema encendido<br>Monitorizando actividad</div>
</div>

<div id='contenidos'>
<div id='fase1' class='bgGris'>
  <div class='izqBg1'>&nbsp;</div>
  <div class='izq1'> AVISO DE 15 SEGUNDOS</div>
</div>
<div id='fase2' class='bgBlanco'>
  <div class='izqBg2'>&nbsp;</div>
  <div class='izq1'> AVISO DE 30 SEGUNDOS</div>
</div>
<div id='fase3' class='bgGris'>
  <div class='izqBg3'>&nbsp;</div>
  <div class='izq1'> AVISO DE 45 SEGUNDOS</div>
</div>
<div id='fase4' class='bgBlanco'>
  <div class='izqBg4'>&nbsp;</div>
  <div class='izq1'> AVISO DE 60 SEGUNDOS</div>
</div>
</div>


<div id="accelerometer">Waiting for accelerometer...</div>

</div>


</body>
</html>
